##########################################################################
#   HDS OPE file Editor  (HOE)                                           #
#                         Document file                                  #
#                                                                        # 
#                                                                        # 
#                                  ver 3.3.0  2018/02/13                 # 
#                               Copyright (C) 2003-18 Akito Tajitsu      #
#      Subaru Telescope, National Astronomical Observatory of Japan      #
#                                               tajitsu_at_naoj.org      # 
##########################################################################


$$$ Introduction $$$
HDS OPE file Editor (HOE) is a tool-program to make operation files
for your observations with HDS (High Dispersion Spectrograph) of
Subaru Telescope, NAOJ.
It also has a function as Echelle format simulators for HDS.

If you can access to the intra-net of Subaru Telecope,
you can download it via
    http://hds.skr.jp/wiki/
  (But, you need a password to enter this page.)


$$$ Environment $$$
This program is running under UNIXs with X window sytems,
or MS Windows (Win2k, WinXP).

For compiling this program, Gtk+-2.0 development environment is necessary
at least. (For Win, use MinGW + Gtk-dev).
The latest versio of HOE (ver2.x) needs Gtk+-2.x (2.8 or later).

Now, ver1.9.0 has a SkyMonitor function, using cairo library.
You need Gtk+2.8 or later to use this function (The configure-script
will automatically detect the library.).



$$$ How to Make (for UNIX, linux & Solaris) $$$
  - Extract archives, go to the extraced directory.

  - % ./configure

  - % make

Then, an executable file "hoe" should be built.
You can copy this file to other directory as you like.


$$$ How to Make (for Windows) $$$
Basically, Win32 version will be served as binary packages.

Developement environment should have  msys + min-gw + gtk-dev + grwin.
You can find a manuscript to build almost same developping environment
in
   http://sylpheed.sraoss.jp/wiki/index.php?Sylpheed%2FWin32
(A mailer soft for UNIX/Win32 compatible)¡¡¡¡

  - ./configure --with-win32

  - make

   (or makewin32.sh script will do all above process in Win32 wnvironment)
¡¡

$$$ Input Text File $$$
[1] CSV file
You should prepare target list text files for your observation.

	HD94028     ,105128.1 ,+201639.0 ,2000,  <Comments>
	BD+36 2165  ,111248.0 ,+354343.9 ,2000,  Mv=8.4  Fe/H=-2
	HD97916     ,111554.2 ,+020512.1 ,2000,  Mv=10.2 Fe/H=-2
	BD+51 1696  ,114635.2 ,+505254.7 ,2000   
	BD-13 3442  ,114650.7 ,-140643.5 ,2000,
           .....................

Cammas are the separator of each column.
      (Object Name), (RA), (Dec), (Epoch), <comments (if necessary>
You should write "until sec" of RA/Dec.
(They are regarded as floating poiint arguments [f09.2, f+010.2 etc.])
You can write some comments in the last column, if you want.

This file can be read from the menu or "-i" option in starting.


[2]OPE file
OPE files for SOSs can be available for objects inputs.
hskymon reads the parameter list section in OPE files likely,

   <PARAMETER_LIST>

   TGT_BD44493=OBJECT="BD+44 493" RA=022649.60 DEC=+445746.80 EQUINOX=2000.00
   TGT_HD222304=OBJECT="HD222304" RA=033908.30 DEC=+502818.20 EQUINOX=2000.00
   TGT_HD224544=OBJECT="HD224544" RA=235849.20 DEC=+322254.10 EQUINOX=2000.00
   TGT_HD225132=OBJECT="HD225132" RA=000344.40 DEC=-172009.50 EQUINOX=2000.00
           ....................................

All characters in the objectname will be capitalized.


[3] Non-Sidereal Tracking File (TSC format)
Non-Sidereal tracking files for TSC can also be avairable.
Files must follow the format described in
  https://www.naoj.org/Observing/Telescope/Tracking/NonSidereal/
. You should use "Geocentric" coordinate in TSC files.
They would be automatically converted into topocentric in the program.
When hoe's time and date are out of the range of the tracking 
calculation, the object's coordinate will be displayed with red characters
in the Main Target List TAB.
You can check the orbit of the non-sidereal target in the Finsing Chart.


[4] Non-Sidereal Tracking File (JPL HORIZONS format)
hskymon can also load NASA JPL HIRIZONS output files.
  https://ssd.jpl.nasa.gov/horizons.cgi
Please note that you should set 
   "Epehmeris Type" = OBSERVER
   "Observer Location" = Geocentric
   "Table Settings" = 1. Astrometric RA & Dec, 20. Observer range
for your input.
Either calendar date or JD is acceptable for date format.
From the main menu, HORIZONS files can be converted into the TSC format.


$$$ Save and Re-edit $$$
Edit some parameters and save OPE from the menu.
And all settings of hoe can be saved in *.hoe file ("Save Config" in
the menu).Its very useful to re-edit your observing plan.


$$$ Obs Plan Editor $$$
HOE version 2.x or later has "Obs. Plan Editor" to support making
observation plan.
You can run this function form the menu bar ("Edit"->"Obs. Plan
Editor").
In this editor, the necessary time for each task will be calculated
automatically. Therefore, you can easiliy know the time table in
observing night. SunSet/Rise and Twilight time are also inserted
automatically.

After build your observational plan, please choose "File"->"Write OPE
w/Plan" in the menu bar of the editor. Then, an OPE file following
your plan will be created automatically.


$$$ Upload OPE file to Gen2 $$$
Since ver 1.9.6, if you input correct SOSs ID and passwod in GUI,
you can upload OPE files in your system to Gen2 directly via this program.
The inside protocol is sftp using python + paramiko script.
Please Install
 - Python (and you should set the correct path to run "python" command.)
 - paramiko (SSH2 protocol for python)
 - pycrypt (only for Windows)

You should use this function only inside of STN.
Your passwords are saved in your .hoe files by ASCII text.
So, please be careful to use this function. 


$$$ Copyright $$$
   The code in this distribution is Copyright 2003-2018 by Akito Tajitsu.

   This program is free software; you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation; either version 3, or (at your option)
   any later version.

   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.

   You should have received a copy of the GNU General Public License
   along with this program; if not, write to the Free Software
   Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA

   In addition, as a special exception, A.Tajitsu gives permission to link 
   this code of this program with the OpenSSL library (or with modified
   versions of OpenSSL that use the same license as OpenSSL), and distribute
   linked combinations including the two. You must obey the GNU General 
   Public License in all respects for all of the code used other than OpenSSL.
   If you modify this file, you may extend this exception to your version of 
   the file, but you are not obligated to do so. If you do not wish to do so,
   delete this exception statement from your version.
